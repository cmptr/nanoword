import{c as de,l as ve,a as w}from"../chunks/3KWLfpDR.js";import{D as ce,F as y,G as me,I as ge,J as z,K as m,L as pe,M as L,N as T,g as e,O as M,P as s,Q as b,R as $,S as O,T as V,V as fe,s as q,W as Q,X as c,$ as ue,Y as r,Z as he,_ as U,a0 as x}from"../chunks/CmzJJKhx.js";import{i as j}from"../chunks/BL2QTzks.js";import{l as h,s as P,a as _e}from"../chunks/NyzOKfwD.js";import{s as be,a as ye}from"../chunks/D300RiNs.js";import{s as xe}from"../chunks/qJMkmo8-.js";const we=()=>{const i=xe;return{page:{subscribe:i.page.subscribe},navigating:{subscribe:i.navigating.subscribe},updated:i.updated}},W={subscribe(i){return $e("page").subscribe(i)}};function $e(i){try{return we()[i]}catch{throw new Error(`Cannot subscribe to '${i}' store on the server outside of a Svelte component, as it is bound to the current request via component context. This prevents state from leaking between users.For more information, see https://svelte.dev/docs/kit/state-management#avoid-shared-state-on-the-server`)}}o[b]="src/routes/share/[date]/[shareId]/+page.svelte";var Se=w($('<meta property="og:title"/> <meta property="og:description"/> <meta property="og:type" content="website"/> <meta name="twitter:card" content="summary"/> <meta name="twitter:title"/> <meta name="twitter:description"/>',1),o[b],[[47,2],[48,2],[49,2],[50,2],[51,2],[52,2]]),Ee=w($('<div class="loading loading-spinner loading-lg"></div>'),o[b],[[58,2]]),ze=w($(`<div class="card bg-base-100 shadow-xl max-w-md"><div class="card-body text-center"><h2 class="card-title justify-center text-error"> </h2> <p>Sorry, this share link could not be found.</p> <div class="card-actions justify-center"><a href="/" class="btn btn-primary" style="font-family: 'Pixelify Sans', sans-serif;">Play Today's Puzzle</a></div></div></div>`),o[b],[[60,2,[[61,3,[[62,4],[63,4],[64,4,[[65,5]]]]]]]]),Te=w($(`<div class="card bg-base-100 shadow-xl max-w-lg"><div class="card-body text-center"><h1 class="text-4xl font-bold mb-2" style="font-family: 'Pixelify Sans', monospace; color: #535353;">nanoword</h1> <div class="text-lg mb-4" style="font-family: 'Tiny5', monospace; color: #666;"> </div> <div> </div> <div class="stats stats-horizontal shadow mb-6"><div class="stat"><div class="stat-title">Time</div> <div class="stat-value text-lg"> </div></div> <div class="stat"><div class="stat-title">Hints Used</div> <div class="stat-value text-lg"> </div></div></div> <div class="card-actions justify-center"><a href="/" class="btn btn-primary btn-lg" style="font-family: 'Pixelify Sans', sans-serif;">Play Today's Puzzle</a></div></div></div>`),o[b],[[70,2,[[71,3,[[72,4],[75,4],[78,4],[82,4,[[83,5,[[84,6],[85,6]]],[87,5,[[88,6],[89,6]]]]],[93,4,[[94,5]]]]]]]]),je=w($('<div class="min-h-screen bg-white flex items-center justify-center p-4" style="color: #535353;"><!></div>'),o[b],[[56,0]]);function o(i,A){de(new.target),ce(A,!0,o);const X=()=>(he(W,"page"),ye(W,"$page",Y)),[Y,Z]=be();let a=y(O(null),"shareData"),N=y(O(!0),"loading"),k=y(O(null),"error");me(async()=>{try{const{date:t,shareId:n}=X().params;console.log(...h("log","Share page mounting with params:",{date:t,shareId:n}));const l=(await V(fetch(`/api/share/${t}/${n}`)))();if(console.log(...h("log","Share page response status:",l.status)),console.log(...h("log","Share page response headers:",Object.fromEntries(l.headers.entries()))),!l.ok){const g=(await V(l.text()))();throw console.error(...h("error","Share page response error:",g)),fe(l.status,404)?new Error("Share not found"):new Error("Failed to load share")}const _=(await V(l.json()))();console.log(...h("log","Share page received data:",_)),q(a,_.shareData,!0),console.log(...h("log","Share page shareData set to:",e(a)))}catch(t){console.error(...h("error","Error in share page:",t)),q(k,t.message,!0)}finally{console.log("Share page loading set to false"),q(N,!1)}});let B=y(Q(()=>{var t;return(t=e(a))!=null&&t.isRevealed?"🔍":"✅"}),"statusEmoji"),S=y(Q(()=>{var t;return(t=e(a))!=null&&t.isRevealed?"REVEALED":"SOLVED"}),"statusText");var ee={...ve()},D=je();ge(t=>{var n=L(),l=T(n);{var _=g=>{var d=Se(),v=T(d),p=c(v,2),f=c(p,6),u=c(f,2);M(()=>{ue.title=`nanoword ${e(a).date??""} - ${e(S)??""}`,P(v,"content",`nanoword ${e(a).date??""} - ${e(S)??""}`),P(p,"content",`I ${e(a).isRevealed?"revealed":"solved"} today's nanoword puzzle in ${e(a).time??""}!`),P(f,"content",`nanoword ${e(a).date??""} - ${e(S)??""}`),P(u,"content",`I ${e(a).isRevealed?"revealed":"solved"} today's nanoword puzzle in ${e(a).time??""}!`)}),m(g,d)};z(()=>j(l,g=>{e(a)&&g(_)}),"if",o,45,1)}m(t,n)});var te=s(D);{var ae=t=>{var n=Ee();m(t,n)},se=t=>{var n=L(),l=T(n);{var _=d=>{var v=ze(),p=s(v),f=s(p),u=s(f);r(f),U(4),r(p),r(v),M(()=>x(u,`❌ ${e(k)??""}`)),m(d,v)},g=d=>{var v=L(),p=T(v);{var f=u=>{var R=Te(),C=s(R),I=c(s(C),2),oe=s(I,!0);r(I);var E=c(I,2),ie=s(E);r(E);var G=c(E,2),F=s(G),H=c(s(F),2),ne=s(H);r(H),r(F);var J=c(F,2),K=c(s(J),2),le=s(K);r(K),r(J),r(G),U(2),r(C),r(R),M(()=>{x(oe,e(a).date),_e(E,1,`text-2xl mb-6 ${e(a).isRevealed?"text-warning":"text-success"}`),x(ie,`${e(B)??""} ${e(S)??""}`),x(ne,`⏱️ ${e(a).time??""}`),x(le,`💡 ${e(a).hints??""}`)}),m(u,R)};z(()=>j(p,u=>{e(a)&&u(f)},!0),"if",o,69,1)}m(d,v)};z(()=>j(l,d=>{e(k)?d(_):d(g,!1)},!0),"if",o,59,1)}m(t,n)};z(()=>j(te,t=>{e(N)?t(ae):t(se,!1)}),"if",o,57,1)}r(D),m(i,D);var re=pe(ee);return Z(),re}export{o as component};
